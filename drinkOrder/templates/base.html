<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Drink Order System{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuButton = document.getElementById('menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const avatarButton = document.getElementById('avatar-button');
            const avatarDropdown = document.getElementById('avatar-dropdown');

            menuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            avatarButton.addEventListener('click', () => {
                avatarDropdown.classList.toggle('hidden');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!avatarButton.contains(e.target) && !avatarDropdown.contains(e.target)) {
                    avatarDropdown.classList.add('hidden');
                }
            });
        });
    </script>    
</head>
<body class="bg-gray-100 flex flex-col min-h-screen">
    <header class="bg-blue-600 text-white">
        <nav class="bg-blue-600 p-4">
            <div class="max-w-7xl mx-auto flex justify-between items-center">
                <!-- Logo -->
                {% if user.is_authenticated %}
                    {% if user.is_bartender %}
                        <a href="{% url 'drinks:bartender_menu' %}" class="text-white text-xl font-bold">Drink Order System</a>
                    {% else %}
                        <a href="{% url 'drinks:drink_menu' %}" class="text-white text-xl font-bold">Drink Order System</a>
                    {% endif %}
                {% endif %} 
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-4">
                    {% if user.is_authenticated %}
                        {% if user.is_bartender %}
                            <a href="{% url 'orders:order_list' %}" class="text-white hover:underline">Order List</a>
                            <a href="{% url 'users:customer_list' %}" class="text-white hover:underline">Customer List</a>
                        {% endif %}
                        {% if user.is_customer %}
                            <a href="{% url 'orders:place_order' %}" class="text-white hover:underline">Place Order</a>
                        {% endif %}
                        <!-- Avatar Dropdown -->
                        <div class="relative">
                            <button id="avatar-button" class="flex items-center focus:outline-none" aria-label="User menu">
                                {% if user.avatar %}
                                    <img src="{{ user.avatar.url }}" alt="Avatar of {{ user.full_name|default:user.username }}" class="h-10 w-10 rounded-full object-cover">
                                {% else %}
                                    <img src="https://media.istockphoto.com/illustrations/blank-man-profile-head-icon-placeholder-illustration-id1298261537?k=20&m=1298261537&s=612x612&w=0&h=8plXnK6Ur3LGqG9s-Xt2ZZfKk6bI0IbzDZrNH9tr9Ok=" alt="No avatar for {{ user.full_name|default:user.username }}" class="h-10 w-10 rounded-full object-cover">
                                {% endif %}
                            </button>
                            <div id="avatar-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10">
                                {% if user.is_customer %}
                                <a href="{% url 'orders:customer_order_list' %}" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">My Orders</a>
                                {% endif %}
                                <a href="{% url 'users:profile' %}" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Profile</a>
                                <a class="block px-4 py-2 text-gray-800 hover:bg-gray-100">
                                    <form method="POST" action="{% url 'users:logout' %}" class="inline">
                                        {% csrf_token %}
                                        <button type="submit">Logout</button>
                                    </form>
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <a href="{% url 'drinks:drink_menu' %}" class="text-white hover:underline">Drink Menu</a>
                        <a href="{% url 'users:login' %}" class="text-white hover:underline">Login</a>
                    {% endif %}
                </div>
                <!-- Mobile Menu Button -->
                <button id="menu-button" class="md:hidden text-white focus:outline-none" aria-label="Toggle mobile menu">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
            <!-- Mobile Menu
            <div id="mobile-menu" class="hidden md:hidden bg-blue-600">
                <div class="flex flex-col space-y-2 p-4">
                    {% if user.is_authenticated %}
                    {% if user.is_bartender %}
                    <a href="{% url 'drinks:bartender_menu' %}" class="text-white hover:underline">Bartender Menu</a>
                    {% else %}
                    <a href="{% url 'drinks:drink_menu' %}" class="text-white hover:underline">Drink Menu</a>
                    {% endif %}
                    {% if user.is_customer %}
                    <a href="{% url 'orders:place_order' %}" class="text-white hover:underline">Place Order</a>
                    {% endif %}
                    <a href="{% url 'orders:customer_order_list' %}" class="text-white hover:underline">My Orders</a>
                    <a href="{% url 'users:profile' %}" class="text-white hover:underline">Profile</a>
                    <a href="{% url 'users:logout' %}" class="text-white hover:underline">Logout</a>
                    {% else %}
                    <a href="{% url 'drinks:drink_menu' %}" class="text-white hover:underline">Drink Menu</a>
                    <a href="{% url 'users:login' %}" class="text-white hover:underline">Login</a>
                    {% endif %}
                </div>
            </div>
            -->
        </nav>
    </header>
    <main class="container mx-auto p-4 flex-grow">
        {% block content %}
        {% endblock %}
    </main>
    <footer class="bg-gray-800 text-white text-center p-4">
        <p>&copy; {% now "Y" %} Drink Order System. All rights reserved.</p>
        <p><a href="mailto:support@drinkordersystem.com" class="hover:underline">Contact Us</a></p>
    </footer>
</body>
</html>